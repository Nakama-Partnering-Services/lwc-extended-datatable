<template>
	<lightning-spinner if:true={showSpinner} variant="brand" alternative-text="Loading" size="large">
	</lightning-spinner>

	<!-- onloadmore event listener added declaratively in the template with
            conditional rendering due to issues adding/removing it dynamically -->

	<div if:true={isDraggable} style={containerStyle}>
		<c-lightning-datatable-extended
			if:true={enableInfiniteLoading}
			class="dynamic-datatable"
			key-field="Id"
			columns={columns}
			data={data}
			hide-table-header={hideTableHeader}
			suppress-bottom-bar={suppressBottomBar}
			show-row-number-column={showRowNumberColumn}
			hide-checkbox-column={hideCheckboxColumn}
			max-column-width={maxColumnWidth}
			min-column-width={minColumnWidth}
			resize-column-disabled={resizeColumnDisabled}
			column-widths-mode={columnWidthsMode}
			default-sort-direction="asc"
			sorted-direction={sortedDirection}
			sorted-by={sortedBy}
			enable-infinite-loading
			onrowaction={handleRowAction}
			onloadmore={loadMoreData}
			onsort={handleSort}
			onsave={handleSave}
			draft-values={draftValues}
			onrowselection={handleRowSelection}
			onheaderaction={handleHeaderAction}>
		</c-lightning-datatable-extended>

		<c-lightning-datatable-extended
			if:false={enableInfiniteLoading}
			class="dynamic-datatable"
			key-field="Id"
			columns={columns}
			data={data}
			hide-table-header={hideTableHeader}
			suppress-bottom-bar={suppressBottomBar}
			show-row-number-column={showRowNumberColumn}
			hide-checkbox-column={hideCheckboxColumn}
			max-column-width={maxColumnWidth}
			min-column-width={minColumnWidth}
			resize-column-disabled={resizeColumnDisabled}
			column-widths-mode={columnWidthsMode}
			default-sort-direction="asc"
			sorted-direction={sortedDirection}
			sorted-by={sortedBy}
			onrowaction={handleRowAction}
			onsort={handleSort}
			onsave={handleSave}
			draft-values={draftValues}
			onrowselection={handleRowSelection}
			onheaderaction={handleHeaderAction}>
		</c-lightning-datatable-extended>
	</div>

	<div if:false={isDraggable} style={containerStyle}>
		<lightning-datatable
			if:true={enableInfiniteLoading}
			class="dynamic-datatable"
			key-field="Id"
			columns={columns}
			data={data}
			hide-table-header={hideTableHeader}
			suppress-bottom-bar={suppressBottomBar}
			show-row-number-column={showRowNumberColumn}
			hide-checkbox-column={hideCheckboxColumn}
			max-column-width={maxColumnWidth}
			min-column-width={minColumnWidth}
			resize-column-disabled={resizeColumnDisabled}
			column-widths-mode={columnWidthsMode}
			default-sort-direction="asc"
			sorted-direction={sortedDirection}
			sorted-by={sortedBy}
			enable-infinite-loading
			onrowaction={handleRowAction}
			onloadmore={loadMoreData}
			onsort={handleSort}
			onsave={handleSave}
			draft-values={draftValues}
			onrowselection={handleRowSelection}
			onheaderaction={handleHeaderAction}>
		</lightning-datatable>

		<lightning-datatable
			if:false={enableInfiniteLoading}
			class="dynamic-datatable"
			key-field="Id"
			columns={columns}
			data={data}
			hide-table-header={hideTableHeader}
			suppress-bottom-bar={suppressBottomBar}
			show-row-number-column={showRowNumberColumn}
			hide-checkbox-column={hideCheckboxColumn}
			max-column-width={maxColumnWidth}
			min-column-width={minColumnWidth}
			resize-column-disabled={resizeColumnDisabled}
			column-widths-mode={columnWidthsMode}
			default-sort-direction="asc"
			sorted-direction={sortedDirection}
			sorted-by={sortedBy}
			onrowaction={handleRowAction}
			onsort={handleSort}
			onsave={handleSave}
			draft-values={draftValues}
			onrowselection={handleRowSelection}
			onheaderaction={handleHeaderAction}>
		</lightning-datatable>
	</div>
</template>
